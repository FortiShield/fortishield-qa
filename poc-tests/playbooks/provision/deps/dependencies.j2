- name: Install python3-venv
  package:
    name: python3-venv
    state: present

- name: Install pip
  package:
    name: python3-pip
    state: present

- name: Create Python virtual environment
  command: python3 -m venv /opt/myenv creates=/opt/myenv

- name: Activate virtual environment
  shell: source /opt/myenv/bin/activate

- name: Copy requirements.txt
  copy:
    src: {{ component }}
    dest: /tmp/requirements.txt

- name: Install pip packages
  pip:
    requirements: /tmp/requirements.txt
