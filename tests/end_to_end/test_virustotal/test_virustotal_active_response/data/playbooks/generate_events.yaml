- name: Generate events
  hosts: wazuh-agent
  tasks:

    # - name: Delete folder
    #   become: true
    #   command: rm -r /test
    #   ignore_errors: true

    # - name: "{{ event_description }}"
    #   become: true
    #   command: "{{ command }}"
    #   ignore_errors: true

    - name: "{{ event_description }}"
      become: true
      shell: "{{ shell }}"

    - name: Wait for alert
      wait_for:
        timeout: 5

- name: Get logs
  hosts: wazuh-manager
  tasks:

    - name: Get alerts.json
      fetch:
        src: /var/ossec/logs/alerts/alerts.json
        dest: /tmp/
        flat: true
      become: true
