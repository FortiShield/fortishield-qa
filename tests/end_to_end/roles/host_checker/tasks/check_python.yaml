# REQUIRED VARIABLES
# -------------------
# (String) os: Target operating system

- name: Check default Python version (Linux)
  set_fact:
    failed: true
    errors: "{{ errors }}\nPython version is less than 3. Current version: {{ ansible_python_version }}"
  when: (os == "Linux" and ansible_python['version']['major'] < 3)

- name: Get Python version (Windows)
  win_shell: python -V
  register: version
  when: os == 'Windows'

- name: Check default Python version (Linux)
  set_fact:
    failed: true
    errors: "{{ errors }}\nPython version is less than 3. Current version: {{ version.stdout }}"
  when: (os == "Windows" and version.stdout.split(" ")[1].split(".")[0] | int < 3)
